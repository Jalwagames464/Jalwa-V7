<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Jalwa Pro Dashboard</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { 
            --bg-dark: #06091b; --card-bg: #10142d; --cyan: #00ffca; 
            --text-gray: #7e87a8; --gold: #ffd700; --red: #ff4d4d; --green: #2ecc71;
            --blue-gradient: linear-gradient(180deg, #1a237e 0%, #06091b 100%);
        }
        body { margin: 0; background: var(--bg-dark); font-family: 'Segoe UI', sans-serif; color: white; overflow-x: hidden; }
        .app-container { width: 100%; max-width: 480px; margin: auto; min-height: 100vh; padding-bottom: 90px; display: none; }

        .page { display: none; animation: fadeIn 0.3s; min-height: 100vh; background: var(--bg-dark); }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        .top-bar { padding: 15px; display: flex; align-items: center; background: #10142d; border-bottom: 1px solid #1f2855; justify-content: space-between; }
        .card { background: var(--card-bg); border-radius: 15px; padding: 15px; border: 1px solid #1f2855; margin: 15px; position: relative; }
        .btn-main { width: 100%; background: var(--cyan); color: #000; border: none; padding: 14px; border-radius: 12px; font-weight: 900; cursor: pointer; margin-top: 10px; text-transform: uppercase; }
        
        input { width: 100%; padding: 12px; margin-bottom: 10px; border-radius: 10px; border: 1px solid #1f2855; background: #06091b; color: white; box-sizing: border-box; }

        .game-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; padding: 15px; }
        .game-card { background: #161d3d; border-radius: 15px; padding: 25px 15px; text-align: center; border: 1px solid #1f2855; cursor: pointer; color: white; transition: 0.3s; }

        .ref-box { background: rgba(0, 255, 202, 0.1); padding: 12px; border-radius: 10px; border: 1px dashed var(--cyan); margin-top: 10px; font-size: 12px; word-break: break-all; color: var(--cyan); cursor: pointer; }
        .task-box { background: #161d3d; padding: 15px; border-radius: 15px; margin-bottom: 12px; display: flex; justify-content: space-between; align-items: center; border: 1px solid #1f2855; }
        .mission-btn { background: var(--cyan); color: #000; border: none; padding: 8px 15px; border-radius: 8px; font-weight: bold; cursor: pointer; }

        .brand-header { text-align: center; padding: 40px 10px; background: var(--blue-gradient); border-bottom-left-radius: 30px; border-bottom-right-radius: 30px; }
        .upi-copy-box { background: #06091b; padding: 10px; border-radius: 8px; border: 1px solid var(--cyan); display: flex; justify-content: space-between; align-items: center; margin: 10px 0; }

        .bottom-nav { position: fixed; bottom: 0; width: 100%; max-width: 480px; background: #10142d; display: flex; justify-content: space-around; padding: 12px 0; border-top: 1px solid #1f2855; z-index: 1000; }
        .nav-item { text-align: center; color: var(--text-gray); font-size: 11px; cursor: pointer; }
        .nav-item.active { color: var(--cyan); }
        .nav-item i { font-size: 20px; display: block; margin-bottom: 4px; }
        
        #notif { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); background: var(--cyan); color: black; padding: 10px 20px; border-radius: 30px; display: none; z-index: 40000; font-weight: bold; }
        #loader { display:none; position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:50000; justify-content:center; align-items:center; flex-direction:column; }
    </style>
</head>
<body>

<div id="notif">Notification</div>
<div id="loader">
    <i class="fas fa-spinner fa-spin" style="font-size:40px; color:var(--cyan)"></i>
    <p style="margin-top:10px;">Processing Request...</p>
</div>

<div id="auth-screen">
    <div style="text-align:center; padding:50px 20px;">
        <h1 style="color:var(--cyan); letter-spacing: 5px; font-weight: 900;">JALWA PRO</h1>
        <p style="color:var(--text-gray); margin-bottom: 30px;">Premium Gaming Platform</p>
        <input type="number" id="authPhone" placeholder="Mobile Number">
        <input type="password" id="authPass" placeholder="Password">
        <input type="text" id="inviteCode" placeholder="Invite Code (Optional)">
        <button class="btn-main" onclick="handleAuth()">Access Dashboard</button>
    </div>
</div>

<div class="app-container" id="mainDashboard">
    
    <div id="home" class="page active">
        <div class="top-bar">
            <div style="font-size:22px; font-weight:900; color:var(--cyan);">JALWA PRO</div>
            <div style="background: #161d3d; padding: 5px 15px; border-radius: 20px; border: 1px solid var(--cyan);">
                <i class="fas fa-wallet" style="color:var(--gold)"></i> <span id="globalBalance">₹0.00</span>
            </div>
        </div>
        <div class="game-grid">
            <div class="game-card" style="border-color:var(--cyan)" onclick="location.href='game.html'">
                <i class="fas fa-dice" style="font-size:40px; color:var(--cyan); margin-bottom:10px;"></i><br><b>WinGo 30s</b>
            </div>
            <div class="game-card" style="border-color:var(--red)" onclick="location.href='aviator.html'">
                <i class="fas fa-paper-plane" style="font-size:40px; color:var(--red); margin-bottom:10px;"></i><br><b>Aviator Pro</b>
            </div>
        </div>
    </div>

    <div id="activity" class="page">
        <div class="top-bar"><b>Promotions</b></div>
        <div class="card" style="background:var(--blue-gradient)">
            <h3 style="margin:0;">Referral Program</h3>
            <p style="font-size:12px; opacity:0.8;">Get ₹200 bonus when your friend recharges ₹500 or more!</p>
            <div class="ref-box" onclick="copyRef()">
                <span id="refURL">Loading referral link...</span>
                <i class="fas fa-copy" style="margin-left:10px;"></i>
            </div>
        </div>

        <div class="card">
            <div class="task-box">
                <div><b>Daily Check-in</b><br><small style="color:var(--text-gray)">Claim ₹20 Free Every Day</small></div>
                <button class="mission-btn" onclick="claimDaily()">CLAIM</button>
            </div>
            <h4 style="margin: 20px 0 10px 0;">Recharge Missions</h4>
            <div class="task-box">
                <div><b>Level 1</b><br><small style="color:var(--text-gray)">Recharge ₹550 (+₹20 Bonus)</small></div>
                <button class="mission-btn" onclick="showPage('deposit_page')">RECHARGE</button>
            </div>
            <div class="task-box">
                <div><b>Level 2</b><br><small style="color:var(--text-gray)">Recharge ₹1000 (+₹50 Bonus)</small></div>
                <button class="mission-btn" onclick="showPage('deposit_page')">RECHARGE</button>
            </div>
            <div class="task-box">
                <div><b>Level 3</b><br><small style="color:var(--text-gray)">Recharge ₹2000 (+₹500 Bonus)</small></div>
                <button class="mission-btn" onclick="showPage('deposit_page')">RECHARGE</button>
            </div>
        </div>
    </div>

    <div id="wallet" class="page">
        <div class="top-bar"><b>My Wallet</b></div>
        <div style="text-align:center; padding:40px 20px;">
            <p style="color:var(--text-gray); margin-bottom:5px;">Total Balance</p>
            <h1 id="walBal" style="color:var(--cyan); font-size:48px; margin:0;">₹0.00</h1>
        </div>
        <div style="display:flex; gap:12px; padding:0 20px;">
            <button class="btn-main" onclick="showPage('deposit_page')">DEPOSIT</button>
            <button class="btn-main" style="background:white" onclick="showPage('withdraw_page')">WITHDRAW</button>
        </div>
    </div>

    <div id="deposit_page" class="page">
        <div class="top-bar"><i class="fas fa-arrow-left" onclick="showPage('wallet')"></i> <b>Deposit Funds</b></div>
        <div class="card">
            <div style="text-align:center; margin-bottom:20px;">
                <p style="font-size:14px;">Transfer to UPI ID below:</p>
                <div class="upi-copy-box">
                    <b id="adminUPI">d28122004@ptyes</b>
                    <i class="fas fa-copy" onclick="copyUPI()" style="color:var(--cyan); cursor:pointer;"></i>
                </div>
                <p style="font-size:11px; color:var(--text-gray);">Pay at least ₹500 to get bonuses.</p>
            </div>
            <input type="number" id="depAmt" placeholder="Deposit Amount (Min 500)">
            <input type="text" id="depUTR" placeholder="Enter 12-Digit UTR Number">
            <button class="btn-main" onclick="submitDeposit()">Submit Payment</button>
        </div>
    </div>

    <div id="withdraw_page" class="page">
        <div class="top-bar"><i class="fas fa-arrow-left" onclick="showPage('wallet')"></i> <b>Request Withdrawal</b></div>
        <div class="card">
            <p style="font-size:12px; color:var(--red);">* Minimum withdrawal limit is ₹550</p>
            <input type="number" id="witAmt" placeholder="Amount (Min ₹550)">
            <input type="text" id="witBank" placeholder="Bank Name">
            <input type="text" id="witAcc" placeholder="Account Number">
            <input type="text" id="witIFSC" placeholder="IFSC Code">
            <input type="text" id="witUPI" placeholder="UPI ID">
            <button class="btn-main" onclick="submitWithdraw()">Withdraw Now</button>
        </div>
    </div>

    <div id="account" class="page">
        <div class="brand-header">
            <h1 style="color:var(--cyan); margin:0; letter-spacing:4px; font-weight:900;">JALWA PRO</h1>
            <p id="userUIDDisplay" style="color:rgba(255,255,255,0.7); margin-top:5px;">UID: +91 </p>
            <h2 id="accBal" style="margin:15px 0; font-size:32px;">₹0.00</h2>
        </div>
        
        <div class="card">
            <h4><i class="fas fa-history" style="color:var(--cyan); margin-right:10px;"></i>Game History</h4>
            <div id="historyList">
                <p style="font-size:12px; color:var(--text-gray); text-align:center; padding:10px;">No recent games played.</p>
            </div>
        </div>

        <div class="card" onclick="location.href='https://t.me/Realtrademods8911'" style="cursor:pointer; display:flex; align-items:center; gap:15px; border-color:#24A1DE;">
            <i class="fab fa-telegram" style="font-size:30px; color:#24A1DE;"></i>
            <div><b>Customer Support</b><br><small style="color:var(--text-gray)">Click to contact on Telegram</small></div>
        </div>

        <button class="btn-main" style="background:var(--red); color:white; margin:15px; width:calc(100% - 30px)" onclick="logout()">SIGN OUT</button>
    </div>

    <div class="bottom-nav">
        <div class="nav-item active" onclick="showPage('home', this)"><i class="fas fa-home"></i>Home</div>
        <div class="nav-item" onclick="showPage('activity', this)"><i class="fas fa-gift"></i>Activity</div>
        <div class="nav-item" onclick="showPage('wallet', this)"><i class="fas fa-wallet"></i>Wallet</div>
        <div class="nav-item" onclick="showPage('account', this)"><i class="fas fa-user-circle"></i>Account</div>
    </div>
</div>

<script>
    const firebaseConfig = { databaseURL: "https://jalwa-v2-ad222-default-rtdb.firebaseio.com/" };
    if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    let userPhone = localStorage.getItem('jalwa_user_phone');
    let userBalance = 0;

    const urlParams = new URLSearchParams(window.location.search);
    if(urlParams.has('ref')) {
        document.getElementById('inviteCode').value = urlParams.get('ref');
    }

    function showPage(pId, el) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById(pId).classList.add('active');
        if(el) {
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            el.classList.add('active');
        }
    }

    async function handleAuth() {
        const ph = document.getElementById('authPhone').value;
        const ps = document.getElementById('authPass').value;
        const inv = document.getElementById('inviteCode').value || "NONE";
        if(ph.length < 10) return showNotif("Invalid Mobile Number");
        const snap = await db.ref('users/' + ph).once('value');
        if(snap.exists()) {
            if(snap.val().password === ps) login(ph);
            else showNotif("Incorrect Password");
        } else {
            await db.ref('users/' + ph).set({ password: ps, balance: 0, totalDeposit: 0, joined: Date.now(), referredBy: inv });
            login(ph);
        }
    }

    function login(ph) { localStorage.setItem('jalwa_user_phone', ph); location.reload(); }

    if(userPhone) {
        document.getElementById('auth-screen').style.display = 'none';
        document.getElementById('mainDashboard').style.display = 'block';
        document.getElementById('userUIDDisplay').innerText = "UID: +91 " + userPhone;
        document.getElementById('refURL').innerText = "https://jalwa-v7.vercel.app?ref=" + userPhone;

        db.ref('users/' + userPhone).on('value', snap => {
            const d = snap.val();
            if(d) {
                userBalance = d.balance || 0;
                const formatted = "₹" + parseFloat(userBalance).toFixed(2);
                document.getElementById('globalBalance').innerText = formatted;
                document.getElementById('walBal').innerText = formatted;
                document.getElementById('accBal').innerText = formatted;
            }
        });
    }

    function copyRef() {
        const url = document.getElementById('refURL').innerText;
        navigator.clipboard.writeText(url);
        showNotif("Referral Link Copied!");
    }

    function copyUPI() {
        const upi = document.getElementById('adminUPI').innerText;
        navigator.clipboard.writeText(upi);
        showNotif("UPI ID Copied!");
    }

    async function claimDaily() {
        let today = new Date().toDateString();
        if(localStorage.getItem('last_claim') === today) return showNotif("Already claimed today!");
        await db.ref('users/' + userPhone).update({ balance: userBalance + 20 });
        localStorage.setItem('last_claim', today);
        showNotif("Daily Bonus Claimed!");
    }

    function submitDeposit() {
        const amt = document.getElementById('depAmt').value;
        const utr = document.getElementById('depUTR').value;
        if(amt < 500) return showNotif("Minimum deposit is ₹500");
        if(utr.length < 12) return showNotif("Enter valid 12-digit UTR");
        document.getElementById('loader').style.display = 'flex';
        db.ref('requests/deposits').push({ uid: userPhone, amount: amt, utr: utr, status: 'pending', time: Date.now() });
        setTimeout(() => {
            document.getElementById('loader').style.display = 'none';
            showNotif("Deposit request sent for verification.");
            showPage('wallet');
        }, 2000);
    }

    function submitWithdraw() {
        const amt = document.getElementById('witAmt').value;
        if(amt < 550) return showNotif("Minimum withdrawal is ₹550");
        if(amt > userBalance) return showNotif("Insufficient balance");
        document.getElementById('loader').style.display = 'flex';
        db.ref('requests/withdrawals').push({ uid: userPhone, amount: amt, status: 'pending', time: Date.now() });
        db.ref('users/' + userPhone).update({ balance: userBalance - amt });
        setTimeout(() => {
            document.getElementById('loader').style.display = 'none';
            showNotif("Withdrawal processing started.");
            showPage('wallet');
        }, 2000);
    }

    function showNotif(msg) {
        const n = document.getElementById('notif');
        n.innerText = msg; n.style.display = 'block';
        setTimeout(() => n.style.display = 'none', 3000);
    }

    function logout() { localStorage.clear(); location.reload(); }
</script>
</body>
</html>
